#!/usr/bin/env bash

set -o errexit -o nounset -o pipefail

# This script automatically syncs Neovim plugins when any plugin config changes
# The hash below triggers re-execution when files in lua/plugins/ are modified
# Hash: {{ (glob "dot_config/nvim/lua/plugins/*.lua") | join "" | sha256sum }}

if [[ "${DEBUG:-}" == "1" ]]; then
    echo "ðŸ”„ Installing/updating Neovim plugins due to configuration changes..."
fi

# Check if nvim is available
if ! command -v nvim >/dev/null 2>&1; then
    echo "Warning: Neovim not found, skipping plugin installation"
    exit 0
fi

# Install/update plugins
echo "ðŸš€ Syncing Neovim plugins..."
nvim --headless "+Lazy! sync" +qa

if [[ "${DEBUG:-}" == "1" ]]; then
    echo "âœ… Neovim plugins synchronized successfully!"
fi