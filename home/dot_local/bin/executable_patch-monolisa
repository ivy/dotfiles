#!/usr/bin/env bash
set -o errexit -o nounset -o pipefail

# Patch MonoLisa font with Nerd Fonts
# Usage: patch-monolisa [input-dir] [output-dir]
#
# Defaults:
#   input-dir: ./MonoLisa
#   output-dir: ./patched

INPUT_DIR="${1:-./MonoLisa}"
OUTPUT_DIR="${2:-./patched}"

if [[ ! -d "$INPUT_DIR" ]]; then
    echo "Error: Input directory '$INPUT_DIR' does not exist" >&2
    exit 1
fi

mkdir -p "$OUTPUT_DIR"

echo "Patching MonoLisa fonts from '$INPUT_DIR' to '$OUTPUT_DIR'..."
docker run --rm \
    -v "$INPUT_DIR:/in" \
    -v "$OUTPUT_DIR:/out" \
    nerdfonts/patcher --complete

echo "Patching complete! Patched fonts are in '$OUTPUT_DIR'"