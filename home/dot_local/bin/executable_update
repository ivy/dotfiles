#!/usr/bin/env bash

set -o errexit -o nounset -o pipefail

echo "ğŸ”„ Updating dotfiles and all tools..."

# Update Homebrew packages
echo "ğŸ“¦ Updating Homebrew packages..."
brew update && brew upgrade

# Update mise tools
if command -v mise >/dev/null 2>&1; then
    echo "ğŸ› ï¸  Updating mise tools..."
    mise upgrade --yes
fi

# Update Chezmoi managed externals (Oh-My-Zsh, tmux config)
echo "ğŸ“‚ Updating Chezmoi externals..."
chezmoi update

# Update Neovim plugins
echo "ğŸš€ Updating Neovim plugins..."
nvim --headless "+Lazy! update" +qa

# Clean up Homebrew
echo "ğŸ§¹ Cleaning up Homebrew..."
brew cleanup

echo "âœ… All updates completed!"
